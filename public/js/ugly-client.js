window.app=angular.module("thanxbits",["ui.bootstrap","thanxbits.controllers","ngRoute","ngAnimate"]),window.controllers=angular.module("thanxbits.controllers",[]);var el=function(e){return document.getElementById(e)},qs=function(e){return document.querySelectorAll(e)},errhandle=function(e){console.log("Error",e)};window.app.config(["$routeProvider",function(e){e.when("/app/connect",{templateUrl:"/partials/connect",controller:"InviteFriendsController",resolve:{friendsList:["friends",function(e){return e.getMyFriends()}]}}).when("/app/conversations",{templateUrl:"/partials/conversations",controller:"ConversationsController"}).when("/app/thanx",{templateUrl:"/partials/requests",controller:"RequestController"}).when("/app/give",{templateUrl:"/partials/give",controller:"GiveController"}).when("/app/chat/:otherUserId",{templateUrl:"/partials/chat",controller:"ChatController",resolve:{otherUser:["$http","$route","ChatServices",function(e,t,n){return n.getOtherUser("userId",t.current.params.otherUserId)}]}}).when("/app/btc/:otherUserId",{templateUrl:"/partials/addresschat",controller:"ChatController",resolve:{otherUser:["$http","$route","ChatServices",function(e,t,n){return n.getOtherUser("btc",t.current.params.otherUserId)}]}}).when("/app/transaction/:id",{templateUrl:"/partials/transaction",controller:"TransactionController"}).when("/app/me",{templateUrl:"/partials/me",controller:"SettingsController"}).when("/app/settings",{templateUrl:"/partials/me",controller:"SettingsController"}).when("/app/newaccount",{templateUrl:"/partials/newaccount",controller:"NewAccountController"}).when("/profile/:userId",{templateUrl:"/partials/profile",controller:"ProfileCtrl"}).otherwise({redirectTo:"/app/conversations"})}]).config(["$locationProvider",function(e){e.html5Mode(!0)}]),window.app.run(["$rootScope","$location","Analytics","HistoryService",function(e,t,n,r){e.FBfriends=FBfriends,e.$safeApply=function(){var e,t,n=!1;if(arguments.length==1){var r=arguments[0];typeof r=="function"?t=r:e=r}else e=arguments[0],t=arguments[1],arguments.length==3&&(n=!!arguments[2]);e=e||this,t=t||function(){},n||!e.$$phase?e.$apply?e.$apply(t):e.apply(t):t()},e.animationClass="",e.goTo=function(e,n){window.location.pathname.indexOf(e)==-1&&(t.path("/app/"+e),n&&t.search(n))},e.path=function(){var e=window.location.pathname.split("/");return e[e.length-1]},e.message={},e.modalCancel=function(){e.message.body=null,e.message.imgSrc=null},e.errHandle=function(t){e.message={body:t||"error",canceltext:"cool, thanx"}},e.confirmDialog=function(t,n){e.message={body:t,action:n,actiontext:"yes please",canceltext:"no thanx"}},e.showMessage=function(t){n.clickTrack({eventCategory:"dialog",eventAction:"showMessage",eventLabel:t}),e.message={body:t||"success",canceltext:"cool, thanx"}},e.toggleMenu=function(){n.clickTrack({eventCategory:"user",eventAction:"nav",eventLabel:"toggleMenu"}),e.menuOpen=!e.menuOpen,e.connectState=!1},e.toggleSearch=function(){e.searchContainerState=="select"?e.searchContainerState="search":e.searchContainerState="select"};var i=jQuery("#main-container");e.connectState=!1,e.toggleConnect=function(){n.clickTrack({eventCategory:"user",eventAction:"nav",eventLabel:"toggleConnect"});var t=jQuery("#connect-container"),r=t.width();e.connectState==0?(TweenMax.to(i,.7,{x:-r,opacity:.7,ease:Expo.easeInOut}),TweenMax.to(t,.7,{opacity:1,ease:Expo.easeInOut}),e.menuOpen=!1,e.connectState=!0):(TweenMax.to(i,.5,{x:0,opacity:1,ease:Expo.easeInOut}),TweenMax.to(t,.7,{opacity:.5,ease:Expo.easeInOut}),e.connectState=!1)},e.showQr=function(){e.message={body:"qr code",imgSrc:"https://blockchain.info/qr?data="+e.user.address+"&size=200"}},e.$on("$routeChangeSuccess",function(t,n,r){n.loadedTemplateUrl&&n.loadedTemplateUrl.split("/").length>=2&&(e.topPath="/partials/top/"+n.loadedTemplateUrl.split("/")[2]),r&&(n.loadedTemplateUrl!="/partials/conversations"||!!r)&&(r.loadedTemplateUrl=="/partials/conversations"&&n.loadedTemplateUrl=="/partials/chat"?e.animationClass="right-to-left-animation":n.loadedTemplateUrl=="/partials/conversations"&&r.loadedTemplateUrl=="/partials/chat"?e.animationClass="left-to-right-animation":n.loadedTemplateUrl=="/partials/conversations"&&r.loadedTemplateUrl=="/partials/connect"?e.animationClass="left-to-right-animation":r.loadedTemplateUrl=="/partials/conversations"&&n.loadedTemplateUrl=="/partials/connect"?e.animationClass="right-to-left-animation":e.animationClass="")})}]);var h2b=Bitcoin.convert.hexToBytes,b2h=Bitcoin.convert.bytesToHex,make_sending_transaction=function(e,t,n,r,i){i||(i=1e4);var s=e.map(function(e){return e.value}).reduce(function(e,t){return e+t},0),o=[{address:t,value:n}];if(n<5430)throw new Error("Amount below dust threshold!");if(s<n)throw new Error("Not enough money!");if(s-n<i)throw new Error("Not enough to pay "+i/1e8+"BTC fee!");typeof r=="string"&&(r=[r,r]);var u=Math.min(r.length,Math.floor((s-n-i)/5430));for(var a=0;a<u;a++)o.push({address:r[a],value:Math.floor((s-n-i)/u)});return new Bitcoin.Transaction({ins:e.map(function(e){return e.output}),outs:o})},get_enough_utxo_from_history=function(e,t){if(e.constructor!=[].constructor){var n=[];for(var r in e)n.push(e[r]);e=n}var i=e.filter(function(e){return!e.spend}),s=function(e,t){return e.value>t.value},o=i.filter(function(e){return e.value>=t}).sort(s);if(o.length>0)return[o[0]];i.sort(s);var u=0;for(var a=0;a<i.length;a++){u+=i[a].value;if(u>=t)return i.slice(0,a+1)}throw"Not enough money to send funds including transaction fee. Have: "+u+", needed: "+t};window.app.constant("TxTypes",{giveRequest:"giveRequest",getRequest:"getRequest",inviteReward:"inviteReward",signupReward:"signupReward"}),window.app.constant("RequestTypes",{GET:"GET",GIVE:"GIVE"}),window.fbAsyncInit=function(){FB.init({appId:"761433597207088",channelUrl:"http://bitcoinnect.me/channel.html",status:!0,xfbml:!0}),FB.getLoginStatus(function(e){e.status!=="connected"&&e.status==="not_authorized"})},console.log("facebook start"),function(){(function(e,t,n){var r,i=e.getElementsByTagName(t)[0];if(e.getElementById(n))return;r=e.createElement(t),r.id=n,r.src="//connect.facebook.net/en_US/all.js#xfbml=1&appId=761433597207088",i.parentNode.insertBefore(r,i)})(document,"script","facebook-jssdk")}(),window.app=angular.module("bitconnectProfile",["bitconnectProfile.controllers","ngRoute"]),window.controllers=angular.module("bitconnectProfile.controllers",[]),app.config(["$routeProvider",function(e){e.when("/profile/:userId",{templateUrl:"/partials/profile",controller:"ProfileCtrl"}).when("/",{templateUrl:"/partials/profile",controller:"ProfileCtrl"}).otherwise({redirectTo:"/"})}]).config(["$locationProvider",function(e){e.html5Mode(!0)}]);